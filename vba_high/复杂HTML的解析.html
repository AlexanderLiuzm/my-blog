<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>复杂HTML解析 | 一起来学VBA</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.60ba14cb.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.2986e5e9.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.16fc4d87.js" as="script"><link rel="preload" href="/my-blog/assets/js/21.ed2350eb.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.7b242d11.js"><link rel="prefetch" href="/my-blog/assets/js/11.e8193104.js"><link rel="prefetch" href="/my-blog/assets/js/12.42ae7acd.js"><link rel="prefetch" href="/my-blog/assets/js/13.2d325377.js"><link rel="prefetch" href="/my-blog/assets/js/14.f55b1da8.js"><link rel="prefetch" href="/my-blog/assets/js/15.6dbc8e41.js"><link rel="prefetch" href="/my-blog/assets/js/16.4f6d5025.js"><link rel="prefetch" href="/my-blog/assets/js/17.b34fcedc.js"><link rel="prefetch" href="/my-blog/assets/js/18.8cbade4a.js"><link rel="prefetch" href="/my-blog/assets/js/19.87ee01fa.js"><link rel="prefetch" href="/my-blog/assets/js/20.14ca77d3.js"><link rel="prefetch" href="/my-blog/assets/js/22.94f96a8d.js"><link rel="prefetch" href="/my-blog/assets/js/23.132b82a4.js"><link rel="prefetch" href="/my-blog/assets/js/24.4de088b5.js"><link rel="prefetch" href="/my-blog/assets/js/25.1e8b475b.js"><link rel="prefetch" href="/my-blog/assets/js/3.01ded201.js"><link rel="prefetch" href="/my-blog/assets/js/4.a07cd685.js"><link rel="prefetch" href="/my-blog/assets/js/5.df6d08e9.js"><link rel="prefetch" href="/my-blog/assets/js/6.ffa81f48.js"><link rel="prefetch" href="/my-blog/assets/js/7.88812301.js"><link rel="prefetch" href="/my-blog/assets/js/8.9efc655e.js"><link rel="prefetch" href="/my-blog/assets/js/9.3468bdcf.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.60ba14cb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">一起来学VBA</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-blog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/my-blog/vba_entry/" class="nav-link">Excel VBA</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="热门文章" class="dropdown-title"><span class="title">热门文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-blog/vba_entry/ExcelVBA基本语法规则/" class="nav-link">VBA基本语法</a></li><li class="dropdown-item"><!----> <a href="/my-blog/vba_middle/利用ExcelVBA字典删除重复项/" class="nav-link">VBA字典的应用</a></li><li class="dropdown-item"><!----> <a href="/my-blog/vba_middle/二维表转一维表/" class="nav-link">二维表转一维表</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/AlexanderLiuzm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-blog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/my-blog/vba_entry/" class="nav-link">Excel VBA</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="热门文章" class="dropdown-title"><span class="title">热门文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-blog/vba_entry/ExcelVBA基本语法规则/" class="nav-link">VBA基本语法</a></li><li class="dropdown-item"><!----> <a href="/my-blog/vba_middle/利用ExcelVBA字典删除重复项/" class="nav-link">VBA字典的应用</a></li><li class="dropdown-item"><!----> <a href="/my-blog/vba_middle/二维表转一维表/" class="nav-link">二维表转一维表</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/AlexanderLiuzm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/my-blog/vba_entry/" class="sidebar-link">初级</a></li><li><a href="/my-blog/vba_middle/" class="sidebar-link">中级</a></li><li><a href="/my-blog/vba_high/" class="sidebar-link">高级</a></li><li><a href="/my-blog/" class="sidebar-link">首页</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="复杂html解析"><a href="#复杂html解析" class="header-anchor">#</a> 复杂HTML解析</h1> <h2 id="写在最开头——避免直接写代码"><a href="#写在最开头——避免直接写代码" class="header-anchor">#</a> 写在最开头——避免直接写代码</h2> <p>遇到一个复杂的HTML文档，第一个要想的不是如何赶紧写出代码把数据抓下来，而是要想有没有其他的替代方法。因为复杂的HTML如果不假思索的写下爬虫代码，很容易遇到问题。</p> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <p>主要有两个问题：</p> <ol><li>代码复杂难写，不优美</li> <li>网站更改后篇爬虫极容易失效</li></ol> <h3 id="替代方法"><a href="#替代方法" class="header-anchor">#</a> 替代方法</h3> <p>替代方法也是有的，最好是先看看有没有其他更好的办法，最好实在很不幸，没有其他替代方法了，再思索如何写代码。</p> <h4 id="寻找“打印此页”按钮"><a href="#寻找“打印此页”按钮" class="header-anchor">#</a> 寻找“打印此页”按钮</h4> <p>“打印此页”或者网站的移动版排版可能会比原网站更友好，可以尝试找一下，有时候会带来很大的便利。</p> <h4 id="寻找隐藏在js文件里的信息"><a href="#寻找隐藏在js文件里的信息" class="header-anchor">#</a> 寻找隐藏在Js文件里的信息</h4> <p>有的数据可能隐藏在网站加载的Js文档中。</p> <h4 id="网页的url链接"><a href="#网页的url链接" class="header-anchor">#</a> 网页的URL链接</h4> <p>网页的标题很可能在网页的URL链接中也会出现，这时就不用大费周章了，直接拿URL用不就好了？</p> <h4 id="找找其他数据源"><a href="#找找其他数据源" class="header-anchor">#</a> 找找其他数据源</h4> <p>找找看，有没有其他网站也显示了相同的数据？别的网站HTML文档是不是更容易解析与抓取？</p> <h2 id="beautifulsoup"><a href="#beautifulsoup" class="header-anchor">#</a> BeautifulSoup</h2> <h3 id="find-findall"><a href="#find-findall" class="header-anchor">#</a> find() &amp; findAll()</h3> <p><code>find()</code>和<code>findAll()</code>（<strong>注意A是大写的</strong>，不大写会出错）是两个最常用的函数，来看看这两个函数的定义吧。</p> <ul><li><code>findAll(tag, attributes, recursive, text, limit, keywords)</code></li> <li><code>find(tag, attributes, recursive, text, keywords)</code></li></ul> <h4 id="tag"><a href="#tag" class="header-anchor">#</a> tag</h4> <p>可以传一个标签名称或者多个标签名称组成的列表作为参数。
<code>&quot;h1&quot;</code> <code>{&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;}</code></p> <h4 id="attributes"><a href="#attributes" class="header-anchor">#</a> attributes</h4> <p>借用书上的话说，</p> <blockquote><p>属性参数attributes是一个；用Python字典封装一个标签的若干属性和对应的属性值。</p></blockquote> <p>示例：
下面的代码会返回HTML文档里红色与绿色的span标签</p> <div class="language-python extra-class"><pre class="language-python"><code>bsObj<span class="token punctuation">.</span>findAll<span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>调用属性来抓取标签要把属性写成字典的样子。用属性的名称作为Key，用属性的值作为Value，要用到多个不同的属性，他们之间用逗号隔开就可以了。</p> <h4 id="recursive"><a href="#recursive" class="header-anchor">#</a> recursive</h4> <p>recursive参数主要是设定BeautifulSoup是否查找我们找寻的标签的所有子标签。设置为True，那就查找所有子标签，如果是False，那就只查找文档的一级标签。recursive参数的默认值为True。</p> <h4 id="text"><a href="#text" class="header-anchor">#</a> text</h4> <p>text参数是用标签的文本内容去匹配，而不是标签的属性。</p> <h4 id="limit"><a href="#limit" class="header-anchor">#</a> limit</h4> <p>limit参数只有findAll()函数才有，这个参数可以指定查找前x个我们想要找的标签。find()函数相当于指定limit=1的findAll()函数，只返回查找的第一个标签。</p> <h4 id="keywords"><a href="#keywords" class="header-anchor">#</a> keywords</h4> <p>keywords参数可以让我们选择具有特定属性的标签。示例：<code>allText = bsObj.findAll(id=&quot;text&quot;)</code>。虽然说看起来好像很方便，但是其实keywords能做到的，通过Tag+Attrubute也能实现。并且使用keywords是有限制的，例如<code>class</code>是Python的保留字段，也就是说我们使用keywords参数时是无法查找<code>class</code>属性对应的标签的。解决的办法是这样写<code>bsObj.findAll(class_=&quot;green&quot;)</code>。</p> <p>那这是否说明我们可以放弃keywords参数，全面转向Tag+Attribute就可以了呢？其实也不尽然，keywords属性也有他的独到的用武之地。</p> <blockquote><p>通过标签参数tag把标签列表传到<code>.findAll()</code>里获取一列标签，其实就是一个“或”关系的过滤器。如果你的标签列表很长，就需要花很长时间才能完成。而关键词keywords可以让你增加一个“与”关系的过滤器来简化工作。</p></blockquote> <h3 id="通过属性抓取到标签后"><a href="#通过属性抓取到标签后" class="header-anchor">#</a> 通过属性抓取到标签后</h3> <p>上面讲到的<code>find()</code>和<code>findAll()</code>函数可以帮助我们通过标签、属性甚至标签内的文本去匹配某些标签，匹配到特定的标签之后我们还想要提取出其中包含的信息，那就要用到下面的两个函数了。</p> <h4 id="获取标签内的文本get-text"><a href="#获取标签内的文本get-text" class="header-anchor">#</a> 获取标签内的文本<code>get_text( )</code></h4> <blockquote><p><code>get_text()</code>会把你正在处理的HTML文档中所有的标签都清除，然后返回一个只包含文字的字符串。</p></blockquote> <p>就是说，用了这个函数，我们可以提取出html标签之间包含的内容。一般情况下，我们会最后再用这个函数，因为我们总是希望可以尽量的保留HTML文档的标签结构。</p> <h4 id="获取标签的属性-src"><a href="#获取标签的属性-src" class="header-anchor">#</a> 获取标签的属性<code>[&quot;src&quot;]</code></h4> <blockquote><p>在网络数据采集的时候，你往往不需要查找标签的内容，而是需要查找标签属性。比如标签<code>&lt;a&gt;</code>只想的URL连接包含在<code>herf</code>属性当中，或者<code>&lt;img&gt;</code>标签的图片文件包含在<code>src</code>属性中，这时获取标签属性就变得非常有用了。</p></blockquote> <p>如果我们不对匹配到的内容做任何处理，那么返回给我们的就是一个Python字典对象，而我们想要提取出特定属性的属性值，我们只要给它一个Key让他去提取就可以了。</p> <p>示例：<code>myImgTag.attr[&quot;src&quot;]</code></p> <h3 id="beautifulsoup库里的对象"><a href="#beautifulsoup库里的对象" class="header-anchor">#</a> BeautifulSoup库里的对象</h3> <p>BeautifulSoup库中有四类对象，最常用的是前两种。</p> <h4 id="beautifulsoup对象"><a href="#beautifulsoup对象" class="header-anchor">#</a> BeautifulSoup对象</h4> <p>最常用的对象</p> <h4 id="tag对象"><a href="#tag对象" class="header-anchor">#</a> Tag对象</h4> <p>BeautifulSoup对象通过find和findAll，或者直接调用子标签获取的一列对象或一个对象。</p> <h4 id="navigablestring对象"><a href="#navigablestring对象" class="header-anchor">#</a> NavigableString对象</h4> <p>用来表示标签里的文字，不是标签。</p> <h4 id="comment对象"><a href="#comment对象" class="header-anchor">#</a> Comment对象</h4> <p>用来查找HTML中的注释标签</p> <h3 id="导航树"><a href="#导航树" class="header-anchor">#</a> 导航树</h3> <p>用<code>find()</code>和<code>findAll()</code>可以通过标签和属性来获取标签，而导航树则给我们提供了另外一种方法——通过位置来获取标签。</p> <h4 id="子标签与后代标签"><a href="#子标签与后代标签" class="header-anchor">#</a> 子标签与后代标签</h4> <p>子标签(Children)和后代标签(descendants)是不一样的，子标签是父标签下的一级标签，而后代标签是指父标签下的所有标签。</p> <p>BeautifulSoup默认查找是在一个父标签的后代标签中查找我们要找的标签。比如说，<code>bsObj.div.h1</code>，BeautifulSoup会先在HTML文档中找到第一个div标签，在div标签的后代标签中查找第一个h1标签，而不会再跳出这个div向后继续查找。</p> <p>示例：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html <span class="token operator">=</span> urlopen<span class="token punctuation">(</span><span class="token string">&quot;http://www.pythonscraping.com/pages/page3.html&quot;</span><span class="token punctuation">)</span>
bsObj <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">)</span>

<span class="token keyword">for</span> child <span class="token keyword">in</span> bsObj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">&quot;table&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;giftList&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>children<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
</code></pre></div><h4 id="兄弟标签"><a href="#兄弟标签" class="header-anchor">#</a> 兄弟标签</h4> <p>兄弟标签(sibling)顾名思义就是获取某个标签同一级的标签。sibling函数有四个：</p> <ol><li>获取一组标签</li></ol> <ul><li>next_siblings()</li> <li>previous_siblings()</li></ul> <ol start="2"><li>获取一个标签</li></ol> <ul><li>next_sibling</li> <li>previous_sibling</li></ul> <p>用兄弟标签的时候要注意，我们作为定位的标签不会被获取。这也很容易理解，因为一个人不能被称为是自己的兄弟嘛。哪有人说自己的兄弟是自己的？对标签来说也是一样。</p> <p>示例：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

html <span class="token operator">=</span> urlopen<span class="token punctuation">(</span><span class="token string">&quot;http://www.pythonscraping.com/pages/page3.html&quot;</span><span class="token punctuation">)</span>
bsObj <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">)</span>

<span class="token keyword">for</span> sibling <span class="token keyword">in</span> bsObj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">&quot;table&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;giftList&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tr<span class="token punctuation">.</span>next_siblings<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>sibling<span class="token punctuation">)</span>
</code></pre></div><h4 id="父标签"><a href="#父标签" class="header-anchor">#</a> 父标签</h4> <p>父标签(parent)在爬虫中使用的较少，因为正常的思维就是从上到下，因为父标签一般来说更少，更容易查找。但是某些特殊情况下我们也要使用父标签，比如父标签没有什么属性可以定位，而子标签却有。另外导航树的三种标签也是可以叠加使用的，使查找标签更准确。</p> <p>示例：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

html <span class="token operator">=</span> urlopen<span class="token punctuation">(</span><span class="token string">&quot;http://pythonscraping.com/pages/page3.html&quot;</span><span class="token punctuation">)</span>
bsObj <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bsObj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;../img/gifts/img1.jpg&quot;</span>
	                   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span>previous_sibling<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <p>正则表达式可以识别正则字符串，正则表达式相当于定下了一个规则，<strong>如果一串字符符合这个规则，就返回这串字符，而如果不符合，就不返回，直接忽略他</strong>。</p> <h3 id="正则表达式常用符号"><a href="#正则表达式常用符号" class="header-anchor">#</a> 正则表达式常用符号</h3> <table><thead><tr><th style="text-align:center;">符号</th> <th style="text-align:center;">含义</th> <th style="text-align:center;">例子</th> <th style="text-align:center;">匹配结果</th></tr></thead> <tbody><tr><td style="text-align:center;">*</td> <td style="text-align:center;">匹配前面的字符、子表达式或括号里的字符0次或多次</td> <td style="text-align:center;">a*b*</td> <td style="text-align:center;">aaaa,aaabbb,bbbb</td></tr> <tr><td style="text-align:center;">+</td> <td style="text-align:center;">匹配前面的字符、子表达式或括号里的字符至少1次</td> <td style="text-align:center;">a+b+</td> <td style="text-align:center;">aaab,aabb,abbb</td></tr> <tr><td style="text-align:center;">[]</td> <td style="text-align:center;">匹配任意一个字符</td> <td style="text-align:center;">[A-Z]*</td> <td style="text-align:center;">APPLE,CAPTAL</td></tr> <tr><td style="text-align:center;">()</td> <td style="text-align:center;">表达式编组</td> <td style="text-align:center;">(a*b)*</td> <td style="text-align:center;">ababaaab,abaaab</td></tr> <tr><td style="text-align:center;">{m,n}</td> <td style="text-align:center;">匹配前面的字符、子表达式或括号里的字符m到n次</td> <td style="text-align:center;">a{2,3}b{2,3}</td> <td style="text-align:center;">aabbb,aaabb</td></tr> <tr><td style="text-align:center;">[^]</td> <td style="text-align:center;">匹配任意一个不再中括号里的字符</td> <td style="text-align:center;">[^A-Z]*</td> <td style="text-align:center;">apple,ball</td></tr> <tr><td style="text-align:center;">丨</td> <td style="text-align:center;">匹配任意一个由竖线分割的字符、子表达式</td> <td style="text-align:center;">b(a丨i丨e)d</td> <td style="text-align:center;">bad,bid,bed</td></tr> <tr><td style="text-align:center;">.</td> <td style="text-align:center;">匹配任意单个字符</td> <td style="text-align:center;">b.d</td> <td style="text-align:center;">bad,b$d,b d</td></tr> <tr><td style="text-align:center;">^</td> <td style="text-align:center;">指定字符串开始位置的字符或子表达式</td> <td style="text-align:center;">^a</td> <td style="text-align:center;">apple,adin</td></tr> <tr><td style="text-align:center;">\</td> <td style="text-align:center;">转义字符</td> <td style="text-align:center;">\.\丨\\</td> <td style="text-align:center;">.丨\</td></tr> <tr><td style="text-align:center;">$</td> <td style="text-align:center;">用在正则表达式末尾，表示末端匹配，如果不用的话，正则表达式默认结尾会匹配.*</td> <td style="text-align:center;">[A-Z]*[a-z]*$</td> <td style="text-align:center;">ABCabc,azbd</td></tr></tbody></table> <h3 id="在beautifulsoup中应用正则表达式"><a href="#在beautifulsoup中应用正则表达式" class="header-anchor">#</a> 在BeautifulSoup中应用正则表达式</h3> <p>在BeautifulSoup中想要用正则表达式去匹配标签，要先import re这个库，然后使用<code>re.compile()</code>这个函数。</p> <p>示例：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> re

html <span class="token operator">=</span> urlopen<span class="token punctuation">(</span><span class="token string">&quot;http://pythonscraping.com/pages/page3.html&quot;</span><span class="token punctuation">)</span>
bsObj <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">)</span>
images <span class="token operator">=</span> bsObj<span class="token punctuation">.</span>findAll<span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">:</span>re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\.\.\/img\/gifts\/img.*\.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> image <span class="token keyword">in</span> images<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>image<span class="token punctuation">[</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="其他html解析库"><a href="#其他html解析库" class="header-anchor">#</a> 其他HTML解析库</h2> <p>除了BeautifulSoup，Python还有很多别的HTML解析库，当然了，BeautifulSoup是最受欢迎的几个解析库之一。</p> <h3 id="lxml"><a href="#lxml" class="header-anchor">#</a> lxml</h3> <blockquote><p>这个库可以用来解析HTML和XML文档，虽然学习它要花一些时间，但是它在处理绝大多数HTML文档时速度都非常快。</p></blockquote> <h3 id="html-parser"><a href="#html-parser" class="header-anchor">#</a> HTML parser</h3> <blockquote><p>这是Python自带的解析库。（<a href="https://docs.python.org/3/library/html.parser.html" target="_blank" rel="noopener noreferrer">这是它的说明文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）因为不用安装，所以可以很方便的使用。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/my-blog/assets/js/app.2986e5e9.js" defer></script><script src="/my-blog/assets/js/2.16fc4d87.js" defer></script><script src="/my-blog/assets/js/21.ed2350eb.js" defer></script>
  </body>
</html>
